!function(C,d){"use strict";var O=C.jQuery||C.Zepto,o=0,n=!1;function l(A,g,h,t,e){var m=0,b=-1,v=-1,p=!1,y="afterLoad",z="load",w="error",B="img",L="src",T="srcset",D="sizes",I="background-image";function r(){var n,i,o,l;p=1<C.devicePixelRatio,h=a(h),0<=g.delay&&setTimeout(function(){u(!0)},g.delay),(g.delay<0||g.combined)&&(t.e=(n=g.throttle,i=function(t){"resize"===t.type&&(b=v=-1),u(t.all)},l=0,function(t,e){var r=+new Date-l;function a(){l=+new Date,i.call(A,t)}o&&clearTimeout(o),n<r||!g.enableThrottle||e?a():o=setTimeout(a,n-r)}),t.a=function(t){t=a(t),h.push.apply(h,t)},t.g=function(){return h=O(h).filter(function(){return!O(this).data(g.loadedName)})},t.f=function(t){for(var e=0;e<t.length;e++){var r=h.filter(function(){return this===t[e]});r.length&&u(!1,r)}},u(),O(g.appendScroll).on("scroll."+e+" resize."+e,t.e))}function a(t){for(var e=g.defaultImage,r=g.placeholder,a=g.imageBase,n=g.srcsetAttribute,i=g.loaderAttribute,o=g._f||{},l=0,u=(t=O(t).filter(function(){var t=O(this),e=N(this);return!t.data(g.handledName)&&(t.attr(g.attribute)||t.attr(n)||t.attr(i)||o[e]!==d)}).data("plugin_"+g.name,A)).length;l<u;l++){var f=O(t[l]),c=N(t[l]),s=f.attr(g.imageBaseAttribute)||a;c===B&&s&&f.attr(n)&&f.attr(n,function(t,e){if(e){var r=t.split(",");t="";for(var a=0,n=r.length;a<n;a++)t+=e+r[a].trim()+(a!==n-1?",":"")}return t}(f.attr(n),s)),o[c]===d||f.attr(i)||f.attr(i,o[c]),c===B&&e&&!f.attr(L)?f.attr(L,e):c===B||!r||f.css(I)&&"none"!==f.css(I)||f.css(I,"url('"+r+"')")}return t}function u(t,e){if(h.length){for(var r,a,n,i,o,l=e||h,u=!1,f=g.imageBase||"",c=g.srcsetAttribute,s=g.handledName,d=0;d<l.length;d++)(t||e||function(t){var t=t.getBoundingClientRect(),e=g.scrollDirection,r=g.threshold,a=(0<=v?v:v=O(C).height())+r>t.top&&-r<t.bottom,r=(0<=b?b:b=O(C).width())+r>t.left&&-r<t.right;{if("vertical"===e)return a;if("horizontal"===e)return r}return a&&r}(l[d]))&&(r=O(l[d]),a=N(l[d]),n=r.attr(g.attribute),i=r.attr(g.imageBaseAttribute)||f,o=r.attr(g.loaderAttribute),r.data(s)||g.visibleOnly&&!r.is(":visible")||!((n||r.attr(c))&&(a===B&&(i+n!==r.attr(L)||r.attr(c)!==r.attr(T))||a!==B&&i+n!==r.css(I))||o)||(r.data(s,u=!0),function(e,t,r,a){++m;var n=function(){F("onError",e),E(),n=O.noop},i=(F("beforeLoad",e),g.attribute),o=g.srcsetAttribute,l=g.sizesAttribute,u=g.retinaAttribute,f=g.removeAttribute,c=g.loadedName,s=e.attr(u);{var d,A;a?(d=function(){f&&e.removeAttr(g.loaderAttribute),e.data(c,!0),F(y,e),setTimeout(E,1),d=O.noop},e.off(w).one(w,n).one(z,d),F(a,e,function(t){t?(e.off(z),d()):(e.off(w),n())})||e.trigger(w)):(A=O(new Image),A.one(w,n).one(z,function(){e.hide(),t===B?e.attr(D,A.attr(D)).attr(T,A.attr(T)).attr(L,A.attr(L)):e.css(I,"url('"+A.attr(L)+"')"),e[g.effect](g.effectTime),f&&(e.removeAttr(i+" "+o+" "+u+" "+g.imageBaseAttribute),l!==D&&e.removeAttr(l)),e.data(c,!0),F(y,e),A.remove(),E()}),a=(p&&s?s:e.attr(i))||"",A.attr(D,e.attr(l)).attr(T,e.attr(o)).attr(L,a?r+a:null),A.complete&&A.trigger(z))}}(r,a,i,o)));u&&(h=O(h).filter(function(){return!O(this).data(s)}))}else g.autoDestroy&&A.destroy()}function N(t){return t.tagName.toLowerCase()}function E(){--m,h.length||m||F("onFinishedAll")}function F(t){return(t=g[t])&&(t.apply(A,[].slice.call(arguments,1)),1)}"event"===g.bind||n?r():O(C).on(z+"."+e,r)}function f(t,e){var r=this,a=O.extend({},r.config,e),n={},i=a.name+"-"+ ++o;return r.config=function(t,e){return e===d?a[t]:(a[t]=e,r)},r.addItems=function(t){return n.a&&n.a("string"===O.type(t)?O(t):t),r},r.getItems=function(){return n.g?n.g():{}},r.update=function(t){return n.e&&n.e({},!t),r},r.force=function(t){return n.f&&n.f("string"===O.type(t)?O(t):t),r},r.loadAll=function(){return n.e&&n.e({all:!0},!0),r},r.destroy=function(){return O(a.appendScroll).off("."+i,n.e),O(C).off("."+i),n={},d},l(r,a,t,n,i),a.chainable?t:r}O.fn.Lazy=O.fn.lazy=function(t){return new f(this,t)},O.Lazy=O.lazy=function(t,e,r){if(O.isFunction(e)&&(r=e,e=[]),O.isFunction(r)){t=O.isArray(t)?t:[t],e=O.isArray(e)?e:[e];for(var a=f.prototype.config,n=a._f||(a._f={}),i=0,o=t.length;i<o;i++)a[t[i]]!==d&&!O.isFunction(a[t[i]])||(a[t[i]]=r);for(var l=0,u=e.length;l<u;l++)n[e[l]]=t[0]}},f.prototype.config={name:"lazy",chainable:!0,autoDestroy:!0,bind:"load",threshold:500,visibleOnly:!1,appendScroll:C,scrollDirection:"both",imageBase:null,defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",placeholder:null,delay:-1,combined:!1,attribute:"data-src",srcsetAttribute:"data-srcset",sizesAttribute:"data-sizes",retinaAttribute:"data-retina",loaderAttribute:"data-loader",imageBaseAttribute:"data-imagebase",removeAttribute:!0,handledName:"handled",loadedName:"loaded",effect:"show",effectTime:0,enableThrottle:!0,throttle:250,beforeLoad:d,afterLoad:d,onError:d,onFinishedAll:d},O(C).on("load",function(){n=!0}),C.LazyPlugin=f}(window);
